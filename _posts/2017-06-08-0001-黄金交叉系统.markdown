---
layout: post
title: 001-简单均线交叉策略
date: '2017-06-08'
categories:
  - 策略
  - 转载
published: true
---

这是一个简单的均线交易系统，代码转载于米筐量化。

* 进场：20日均线上穿120日均线。
* 出场：20日均线下穿120均线。 
* 资金管理：全仓进，全仓出。
* 选股：无选股，以上证指数为例.
* 止损止盈：进出场信号。

-----

**1.** 策略代码

{% highlight python %}
import talib
 
def init(context):
    context.s1 = "000001.XSHE"
    context.SHORTPERIOD = 20
    context.LONGPERIOD = 120

def handle_bar(context, bar_dict):
    prices = history_bars(context.s1,context.LONGPERIOD+1, '1d', 'close')
    short_avg = talib.SMA(prices, context.SHORTPERIOD)
    long_avg = talib.SMA(prices, context.LONGPERIOD)
    plot("short avg", short_avg[-1])
    plot("long avg", long_avg[-1])
    cur_position = context.portfolio.positions[context.s1].quantity
    shares = context.portfolio.cash/bar_dict[context.s1].close
    if short_avg[-1] - long_avg[-1] < 0 and short_avg[-2] - long_avg[-2] > 0 and cur_position > 0:
        order_target_value(context.s1, 0)
    if short_avg[-1] - long_avg[-1] > 0 and short_avg[-2] - long_avg[-2] < 0:
        order_shares(context.s1, shares)
{% endhighlight %}

-----

**2.** 策略回测：

![001-均线交叉策略](https://raw.githubusercontent.com/OrangeUFO/orangeufo.github.io/master/static/img/_posts/001.png  "001-均线交叉策略")
